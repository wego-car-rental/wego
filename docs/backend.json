{
  "entities": {
    "User": {
      "title": "User",
      "type": "object",
      "description": "Represents a user of the car rental service.",
      "properties": {
        "fullName": { "type": "string", "description": "User’s full name" },
        "email": { "type": "string", "format": "email", "description": "User’s email address" },
        "phoneNumber": { "type": "string", "description": "Contact phone number" },
        "role": { "type": "string", "enum": ["admin", "manager", "driver", "renter", "owner", "customer"], "description": "User role" },
        "profileImage": { "type": "string", "description": "Profile image URL" },
        "createdAt": { "type": "string", "format": "date-time", "description": "Timestamp of account creation" },
        "updatedAt": { "type": "string", "format": "date-time", "description": "Timestamp of last update" }
      },
      "required": ["fullName", "email", "role", "createdAt", "updatedAt"]
    },
    "Driver": {
      "title": "Driver",
      "type": "object",
      "description": "Represent a driver that can be assigned to bookings/requests.",
      "properties": {
        "firstName": { "type": "string" },
        "lastName": { "type": "string" },
        "email": { "type": "string", "format": "email" },
        "phone": { "type": "string" },
        "licenseNumber": { "type": "string" },
        "licenseExpiry": { "type": "string", "format": "date-time" },
        "address": { "type": "string" },
        "profileImage": { "type": "string" },
        "documents": { "type": "array", "items": { "type": "string" } },
        "experience": { "type": "number" },
        "languages": { "type": "array", "items": { "type": "string" } },
        "available": { "type": "boolean" },
        "bio": { "type": "string" },
        "rating": { "type": "number" },
        "totalTrips": { "type": "number" },
        "vehiclePreferences": { "type": "array", "items": { "type": "string" } },
        "certifications": { "type": "array", "items": { "type": "object", "properties": { "name": { "type": "string" }, "issueDate": { "type": "string", "format": "date-time" }, "expiryDate": { "type": "string", "format": "date-time" } } } },
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" }
      },
      "required": ["firstName", "lastName", "email", "licenseNumber", "licenseExpiry", "createdAt", "updatedAt"]
    },
    "Car": {
      "title": "Car",
      "type": "object",
      "description": "Represents a car available for rent.",
      "properties": {
        "ownerId": { "type": "string", "description": "Reference to the user (owner)" },
        "brand": { "type": "string", "description": "Car brand" },
        "model": { "type": "string", "description": "Car model" },
        "year": { "type": "number", "description": "Year of manufacture" },
        "pricePerDay": { "type": "number", "description": "Rental price per day" },
        "fuelType": { "type": "string", "enum": ["Petrol", "Diesel", "Electric", "Hybrid", "Gasoline"], "description": "Fuel type" },
        "transmission": { "type": "string", "enum": ["Automatic", "Manual"], "description": "Transmission type" },
        "seats": { "type": "number", "description": "Number of seats" },
        "images": { "type": "array", "items": { "type": "string" }, "description": "List of car image URLs" },
        "location": { "type": "string", "description": "Location of the car" },
        "available": { "type": "boolean", "description": "Whether the car is currently available" },
        "availabilityDates": { "type": "array", "items": { "type": "object", "properties": { "start": {"type": "string", "format": "date-time"}, "end": {"type": "string", "format": "date-time"} } } },
        "description": { "type": "string", "description": "A detailed description of the car" },
        "features": { "type": "array", "items": { "type": "string" }, "description": "List of car features" },
        "createdAt": { "type": "string", "format": "date-time", "description": "Timestamp of car addition" },
        "updatedAt": { "type": "string", "format": "date-time", "description": "Timestamp of last update" }
      },
      "required": ["ownerId", "brand", "model", "year", "pricePerDay", "fuelType", "transmission", "seats", "images", "location", "available", "createdAt", "updatedAt", "description", "features"]
    },
    "Booking": {
      "title": "Booking",
      "type": "object",
      "description": "Represents a car rental booking.",
      "properties": {
        "carId": { "type": "string", "description": "Reference to car document" },
        "customerId": { "type": "string", "description": "Reference to user document" },
        "ownerId": { "type": "string", "description": "Reference to car owner" },
        "startDate": { "type": "string", "format": "date-time", "description": "Start date of rental" },
        "endDate": { "type": "string", "format": "date-time", "description": "End date of rental" },
        "totalPrice": { "type": "number", "description": "Total cost of the booking" },
        "status": { "type": "string", "enum": ["pending", "approved", "rejected", "completed", "cancelled"], "description": "Booking status" },
        "createdAt": { "type": "string", "format": "date-time", "description": "Timestamp of booking creation" },
        "updatedAt": { "type": "string", "format": "date-time", "description": "Timestamp of last update" }
      },
      "required": ["carId", "customerId", "ownerId", "startDate", "endDate", "totalPrice", "status", "createdAt", "updatedAt"]
    },
    "Notification": {
      "title": "Notification",
      "type": "object",
      "description": "Represents a notification for a user.",
      "properties": {
        "userId": { "type": "string", "description": "Reference to the target user" },
        "title": { "type": "string", "description": "Short title of the message" },
        "message": { "type": "string", "description": "Full message body" },
        "type": { "type": "string", "enum": ["booking_update", "system_alert", "new_booking", "booking_status_update"], "description": "Type of notification" },
        "channel": { "type": "string", "enum": ["in_app", "email", "sms"], "description": "Preferred delivery channel" },
        "email": { "type": "string", "format": "email", "description": "Optional override recipient email" },
        "phone": { "type": "string", "description": "Optional override recipient phone number" },
        "read": { "type": "boolean", "description": "Whether the user has read the notification" },
        "processed": { "type": "boolean", "description": "Whether delivery was attempted/processed by the sender" },
        "processedAt": { "type": "string", "format": "date-time", "description": "Timestamp of when delivery was processed" },
        "deliveryResults": { "type": "object", "description": "Provider delivery results metadata" },
        "createdAt": { "type": "string", "format": "date-time", "description": "Timestamp of notification creation" }
      },
      "required": ["userId", "title", "message", "type", "createdAt"]
    },
    "Review": {
      "title": "Review",
      "type": "object",
      "description": "Represents a review for a car rental.",
      "properties": {
        "bookingId": { "type": "string", "description": "Reference to the related booking" },
        "carId": { "type": "string", "description": "Reference to the reviewed car" },
        "userId": { "type": "string", "description": "Who wrote the review" },
        "rating": { "type": "number", "description": "Rating from 1 to 5" },
        "comment": { "type": "string", "description": "Optional text feedback" },
        "createdAt": { "type": "string", "format": "date-time", "description": "Timestamp of review creation" }
      },
      "required": ["bookingId", "carId", "userId", "rating", "createdAt"]
    }
  },
  "auth": {
    "providers": ["password", "anonymous"]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/User" },
      "description": "Stores user profiles. The document ID is the Firebase Auth UID."
    },
    "/cars/{carId}": {
      "schema": { "$ref": "#/entities/Car" },
      "description": "Stores all car listings."
    },
    "/bookings/{bookingId}": {
      "schema": { "$ref": "#/entities/Booking" },
      "description": "Stores all bookings for all users and cars."
    },
    "/notifications/{notificationId}": {
      "schema": { "$ref": "#/entities/Notification" },
      "description": "Stores notifications for users."
    },
    "/reviews/{reviewId}": {
      "schema": { "$ref": "#/entities/Review" },
      "description": "Stores reviews for car rentals."
    }
  }
}
